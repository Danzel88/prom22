# Бот для Московского выпускного 2022

###### Предоставляет информацию о мероприятии (карта локации, расписание артистов по каждой отдельно сцене, общая информация об ограничениях).
- В пункте меню **Оставить отзыв** опросник посетитетелей о прошедшем мероприятии.
  - Сообщения проходят модерацию на стоп слова и собираются в google doc
- В пункте меню **Отправить сообщение в канал** можно отправить сообщения для публикации в канале мероприятия и отображения сообщений на экранах расположеных на площадке мероприятия.
  - Сообщения собираются в google doc, где валидируютяс (модерируются) перед отправкой в канал и на экраны.
- Кнопка меню **Канал чата** дает ссылку на канал чата для быстрого перехода.
- Пункт меню **Справка** показывает основные вопросы об ограничениях по проходу на территорию
- Для админов бота есть возможность рассылки всем пользователям информационных сообщений. Реализовано удаление рассылок (на случай ошибки)
- Админы запускают публикацию валидных сообщений в канал. Бот забирает из google doc сообщения с соотвествующим флагом и публикует в канал с интервалом 3 сек(меньший интервал телега расценивает как спам и кикает бота из админов канала).
> - **sender** – Запускает рассылку по всем пользователям, которые нажали «Старт» в боте. В ответ получаешь сообщение с номером рассылки (для удаления рассылки у всех, если вдруг ошибку допустили)
> - **test** – запуск тестовой рассылки, сообщение придет в бот админу который запустил тестовую рассылку
> - **delete** – удаление рассылки, нужно отправить номер рассылки. (номер получишь после /sender)
> - **post** – отправляет сообщения в канал. В таблице в последнем столбце есть выпадающее меню с выбором Ok или No, те сообщения которые отмечены как Ok, будут отправлены в канал мероприятия. По умолчанию сообщение от пользователя приходит со статусом FALSE в последнем столбце. Перед запуском команды ***ОБЯЗАТЕЛЬНО УБЕДИТЕСЬ ЧТО ВСЕ СООБЩЕНИЯ ОТМЕЧЕНЫ OK ИЛИ NO. НЕ ЗАПУСКАЙТЕ /post если после FALSE будет Ok или NO***

Севрис работает в systemd и используется локальынй sqlite. FSM крутится в redis на базовых конфигах хоста в 4 логической БД.
